<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="resources/js/jquery-1.8.1.min.js"></script>
    <link rel="stylesheet" type="text/css" href="resources/css/w3.css">
    <title>Calendar</title>
    <style>
        div {
            border: solid 1px blue;
        }
        .cal_data_col {
            border: solid 1px yellow;
            position: relative;
            float: left;
        }
        .cal_event {
            border: solid 1px red;
            position: absolute;
        }
        .cal_header_col {
            float: left;
            text-align: center;
            display: inline-block;
        }
        .cal_data {
            display: inline-block;
            border:solid 1px red;
        }
    </style>
</head>
<body>
    <div id="scheduler_here" style='width:100%'>
		<div class="cal_navline">
		</div>
		<div class="cal_header" ></div>
		<div class="cal_data" ></div>
        
	</div>
    <script>
        var cal_hours = ['8AM','9AM','10AM','11AM','12PM', '1PM','2PM','3PM','4PM','5PM','6PM', '7PM','8PM','9PM'];
        var cal_data_cols = ['Kelly','Nancy','Phuong'];
        var cal_timeWidth = 50;
        var cal_timeHeight = 44;
        var cal_headerHeight = 22;
        var cal_dataWidth = 0;
        
        $(function () {
            fillCalendar();
        });
        // function be called at the end of resize
        var resizeTimer;
		$(window).on('resize', function(e) {
		  clearTimeout(resizeTimer);
		  resizeTimer = setTimeout(function() {
			  fillCalendar();
		  }, 250);
		});
        function fillCalendar(){
            var w = $(window).width();
            cal_dataWidth = Math.floor( ($(window).width() - cal_timeWidth)/cal_data_cols.length )-2;
            $('.cal_data, .cal_header').css("width", w); 
            $('.cal_data, .cal_header').html("");
            addHeader();
            addTime();
            
            addColumn();
            addEvent();
        }
        function addHeader() {
            var header = document.createElement('div');
            $(header).addClass('cal_header');
            var timeDiv = document.createElement('div');
            $(timeDiv).addClass('cal_header_col');
            $(timeDiv).css({"width":cal_timeWidth, "height":cal_headerHeight});
            $(timeDiv).html("&nbsp;");
            $(header).append(timeDiv);
            $(cal_data_cols).each( function(index, value) {
                var colDiv = document.createElement('div');
                $(colDiv).attr("id","cal_header_col_"+index);
                $(colDiv).addClass('cal_header_col');
                $(colDiv).css({"width":cal_dataWidth, "height":cal_headerHeight});
                $(colDiv).text(value);
                $(header).append(colDiv);
            });
            $('#scheduler_here .cal_header').append(header);
        }
        function addTime() {
            var timeDiv = document.createElement('div');
            $(timeDiv).addClass('cal_time cal_data_col');
            $(timeDiv).css({"width":cal_timeWidth, "height":cal_timeHeight*cal_hours.length});
            $(cal_hours).each( function(index,value) {
                var timeBlockDiv = document.createElement('div');
                $(timeBlockDiv).css("height",cal_timeHeight);
                $(timeBlockDiv).text(value);
                $(timeDiv).append(timeBlockDiv);
            });
            $('.cal_data').append(timeDiv);
        }
        function addColumn() {
            var separateHeight = cal_timeHeight/2;
            $(cal_data_cols).each( function(index, value) {
                var colDiv = document.createElement('div');
                $(colDiv).attr("id","cal_data_col_"+index);
                $(colDiv).addClass('cal_data_col');
                $(colDiv).css({"width":cal_dataWidth, "height":cal_timeHeight*cal_hours.length});
                $(cal_hours).each( function(index,value) {
                    var timeBlockDiv = document.createElement('div');
                    var timeBlockDiv1 = document.createElement('div');
                    $(timeBlockDiv).css("height",separateHeight);
                    $(timeBlockDiv1).css("height",separateHeight);
                    $(colDiv).append(timeBlockDiv);
                    $(colDiv).append(timeBlockDiv1);
                });
                $('.cal_data').append(colDiv);
            });
        }
        function addEvent() {
            var event = document.createElement('div');
            $(event).addClass('cal_event');
            $(event).css({"width":"100%","height":"100px","top":"0px"});
            $('#cal_data_col_'+1).append(event);
        }
        /* Helper functions */
        
    </script>
</body>
</html>